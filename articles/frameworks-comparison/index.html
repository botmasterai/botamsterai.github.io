<!doctype html>
<html>

<head>
  <meta charset="utf-8" />
  
  <link rel="shortcut icon" href="../../images/favicon.ico" type="image/x-icon" />

  <title>Botmaster | Frameworks comparison</title>
  <link rel="stylesheet" href="../../css/tachyons.css" />
  <link rel="stylesheet" href="../../css/main.css" />
  <link rel="stylesheet" href="../../css/notices.css" />
  <link rel="stylesheet" href="../../css/base16-tomorrow.light.css" />
  <link href="../../css/botmaster_style.css" rel="stylesheet">

</head>

<body>

<nav class="container center pa4 mb3">
  <div class="fl w-80 w-100-l">
    <a href="../../">
      <img class="v-mid" src="../../img/botmaster_light.svg" width="200" />
    </a>
  </div>
  <div class="fl w-20 tr dn-l f1 dusty-gray" onclick="showNavMenu()">
    &#9776;
  </div>
</nav>
<main class="container center">
  <div id="sidebar" class="fl w-100 w-20-l pr1-l dn di-l">
  <ul class="list mv2 ml4 ma2-l pa0">
    
      <h5 class="dusty-gray mt3 mb3 ttu">Documentation</h5>
      
        <li class="mb2">
          <a class="no-underline cerulean-blue" href="../../documentation/botmaster/">
            Botmaster
          </a>
        </li>
      
    
      <h5 class="dusty-gray mt3 mb3 ttu">Getting Started</h5>
      
        <li class="mb2">
          <a class="no-underline cerulean-blue" href="../../getting-started/installation/">
            Installation
          </a>
        </li>
      
        <li class="mb2">
          <a class="no-underline cerulean-blue" href="../../getting-started/quickstart/">
            Quickstart
          </a>
        </li>
      
        <li class="mb2">
          <a class="no-underline cerulean-blue" href="../../getting-started/messenger-setup/">
            Messenger setup
          </a>
        </li>
      
        <li class="mb2">
          <a class="no-underline cerulean-blue" href="../../getting-started/slack-setup/">
            Slack setup
          </a>
        </li>
      
        <li class="mb2">
          <a class="no-underline cerulean-blue" href="../../getting-started/twitter-setup/">
            Twitter setup
          </a>
        </li>
      
        <li class="mb2">
          <a class="no-underline cerulean-blue" href="../../getting-started/telegram-setup/">
            Telegram setup
          </a>
        </li>
      
        <li class="mb2">
          <a class="no-underline cerulean-blue" href="../../getting-started/socketio-setup/">
            Socketio setup
          </a>
        </li>
      
        <li class="mb2">
          <a class="no-underline cerulean-blue" href="../../getting-started/webhooks/">
            Webhooks
          </a>
        </li>
      
    
      <h5 class="dusty-gray mt3 mb3 ttu">Working with Botmaster</h5>
      
        <li class="mb2">
          <a class="no-underline cerulean-blue" href="../../working-with-botmaster/botmaster-basics/">
            Botmaster Basics
          </a>
        </li>
      
        <li class="mb2">
          <a class="no-underline cerulean-blue" href="../../working-with-botmaster/middleware/">
            Middleware
          </a>
        </li>
      
        <li class="mb2">
          <a class="no-underline cerulean-blue" href="../../working-with-botmaster/writing-your-own-bot-class/">
            Writing your own Bot Class
          </a>
        </li>
      
    
      <h5 class="dusty-gray mt3 mb3 ttu">Middlewares</h5>
      
        <li class="mb2">
          <a class="no-underline cerulean-blue" href="../../middlewares/official-middleware/">
            Official Middleware
          </a>
        </li>
      
        <li class="mb2">
          <a class="no-underline cerulean-blue" href="../../middlewares/fulfill/">
            Fulfill
          </a>
        </li>
      
    
      <h5 class="dusty-gray mt3 mb3 ttu">Tutorials</h5>
      
        <li class="mb2">
          <a class="no-underline cerulean-blue" href="../../tutorials/watson-conversation/">
            Watson Conversation
          </a>
        </li>
      
    
      <h5 class="dusty-gray mt3 mb3 ttu">Articles</h5>
      
        <li class="mb2">
          <a class="no-underline cerulean-blue" href="../../articles/frameworks-comparison/">
            Frameworks comparison
          </a>
        </li>
      
    
      <h5 class="dusty-gray mt3 mb3 ttu">Updates</h5>
      
        <li class="mb2">
          <a class="no-underline cerulean-blue" href="../../updates/changelog/">
            Changelog
          </a>
        </li>
      
    
  </ul>
</div>

  <div class="fl w-80-l w-100 pl2-l">
    <div class="bg-white br2 mt3">
      <div class="tc bg-black-pearl pv4 br--top2">
        <h1 class="fw5 white">Frameworks comparison</h1>
      </div>
      <div class="pa4">

<h3 id="tl-dr">tl;dr</h3>

<p>Use Botmaster If you want to build platform agnostic conversational bots using a system like Watson Conversation [or your own system] to manage 1 on 1 conversations (On Messenger, Slack, Twitter, Telegram, socket.io or more). e.g. a personal assistant, customer support etc.</p>

<p>Use Botkit if you want to build platform dependant bots on either Slack or Twilio while managing simple conversations based on regex or also more complex ones using again Watson Conversation or wit etc. You can now also use Microsoft Bot Framework with Botkit. Although I&rsquo;m not too sure why one wouldn&rsquo;t just use MS Bot Framework without Botkit.</p>

<h3 id="main-article">Main article</h3>

<p>Although it might seem at first glance like the two frameworks (and other similar ones out there) were created with the same goal in mind, things are quite far from that. Let&rsquo;s have a look at how one of these frameworks compare, namely Botkit.</p>

<p>Botkit was initially created to allow developers to easily build bots of all types that would be available on Slack. Although it now allows developers to build bots for twilio IP messaging and Facebook Messenger too. It was first published in December 2015</p>

<p>Botmaster, on the other hand, is a lightweight framework created after answering the following question: How can I minimise the amount of code a developer has to write in order to create a 1-on-1 conversational chatbot that works on multiple different platforms. It was first published to Github on August 2016.</p>

<p>Due to the differences in application intents between both frameworks, the design differs in many ways.</p>

<h2 id="message-format">Message format</h2>

<p>Botkit&rsquo;s messages are only standardized to some extent. Because Botkit it not opinionated, it doesn&rsquo;t make any assumption on what a message attachments or message quick_replies should look like and what they would map to on different platform.</p>

<p>This means that a Facebook messenger message with an image attachments will look something like this:</p>

<pre><code>{
  user: &lt;id_of_sender&gt;,
  channel: &lt;id_of_sender&gt;, // also
  timestamp: &lt;unix miliseconds timestamp&gt;,
  seq: &lt;message_sequence_id&gt;,
  mid: &lt;message_id&gt;,
  attachments: [
    {
      type: 'image',
      payload: {
        url: 'https://scontent.xx.fbcdn.net/v/.....'
      }
    }
  ]
}
</code></pre>

<p>While a Twilio IPM message (Twilio IPM only supports text) will look like this:</p>

<pre><code>{ ChannelSid: &lt;some_id&gt;,
  EventType: 'onMessageSent',
  InstanceSid: &lt;some_id&gt;,
  Attributes: '{}',
  DateCreated: '2016-07-29T18:42:35.686Z',
  Index: '1',
  From: 'SneakyQuincyEssex',
  MessageSid: &lt;some_id&gt;,
  Identity: 'SneakyQuincyEssex',
  Body: 'yo',
  AccountSid: &lt;some_id&gt;,
  text: 'yo',
  from: 'SneakyQuincyEssex',
  to: undefined,
  user: 'SneakyQuincyEssex',
  channel: &lt;some_id&gt; }
</code></pre>

<p>Because of the nature of Twilio and the nature of channels and how they are dealt with, this makes sense. We&rsquo;ll look at what other differences this brings in the next section.</p>

<p>Standardization is at the heart of Botmaster. The framework was really created for that purpose. In order to do that, the Facebook Messenger message format was chosen and adopted. This means that when your botmaster object receives an &lsquo;update&rsquo; event from anywhere (twitter, telegram as of this writing), you can be sure that it will be of the same format as a similar message that would come from Messenger.
Typically, it would look something like this for a message with an image attachment. Independant of what platform the message comes from:</p>

<pre><code>{
  raw: &lt;platform_specific_raw_update&gt;,
  sender: {
    id: &lt;id_of_sender&gt;
  },
  recipient: {
    id: &lt;id_of_the_recipent&gt; // will typically be the bot's id
  },
  timestamp: &lt;unix_miliseconds_timestamp&gt;,
  message: {
    mid: &lt;message_id&gt;,
    seq: &lt;message_sequence_id&gt;,
    attachments: [
      {
        type: 'image',
        payload: {
          url: 'https://scontent.xx.fbcdn.net/v/.....'
        }
      }
    ]
  }
};
</code></pre>

<p>This allows developers to handle these messages in on place only rather than doing it in multiple ones.</p>

<h2 id="the-bot-object">The bot object</h2>

<p>Confusion may [and most likely will] arise when trying to understand how the bot objects returned with each message differ between both frameworks.</p>

<p>Botkit has a concept of a controller. Controllers are not platform agnostic according to their definition. So for example a Twilio IPM controller will look like this:</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="kd">var</span> <span class="nx">controller</span> <span class="o">=</span> <span class="nx">Botkit</span><span class="p">.</span><span class="nx">twilioipmbot</span><span class="p">({</span>
    <span class="nx">debug</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
<span class="p">});</span>
</code></pre></div>

<p>This controller could then spawn new Twilio IMP bots. Bots all have a fixed endpoint with a port that can be defined if you need multiple bots of the same type. The bot object is returned with every event and you can then do things like send a message or reply etc with it.</p>

<p>For messenger, it would look something like this:</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="kr">const</span> <span class="nx">controller</span> <span class="o">=</span> <span class="nx">Botkit</span><span class="p">.</span><span class="nx">facebookbot</span><span class="p">({</span>
  <span class="nx">access_token</span><span class="o">:</span> <span class="nx">messengerCredentials</span><span class="p">.</span><span class="nx">pageToken</span><span class="p">,</span>
  <span class="nx">verify_token</span><span class="o">:</span> <span class="nx">messengerCredentials</span><span class="p">.</span><span class="nx">verifyToken</span><span class="p">,</span>
<span class="p">});</span>
</code></pre></div>

<p>NOTE: Because of the fixed endpoint and the fact that Botkit does not (according to their code as of Aug 18th 2016) verify the integrity of the requests using the Facebook App Secret, I would advise against using it as this means that anyone can make a request to <a href="https://YOUR_SERVER_URL:PORT_CHOSEN/facebook/receive">https://YOUR_SERVER_URL:PORT_CHOSEN/facebook/receive</a> and fake requests from Facebook.</p>

<p>Of course, you can have multiple controllers in your app. But you will have to manage the various types of incoming messages.</p>

<p>Botmaster does not have this concept of a controller. In fact, if you are coming from Botkit, you can think of Botmaster as a sort of supercontroller from which you can create a bot of any type as in this example:</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="c1">// just an example to show what types of settings are expected</span>
<span class="kr">const</span> <span class="nx">otherMessengerSettings</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">credentials</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">verifyToken</span><span class="o">:</span> <span class="nx">messengerCredentials</span><span class="p">.</span><span class="nx">verifyToken</span><span class="p">,</span>
    <span class="nx">pageToken</span><span class="o">:</span> <span class="nx">messengerCredentials</span><span class="p">.</span><span class="nx">pageToken</span><span class="p">,</span> <span class="c1">// access_token in Botkit</span>
    <span class="nx">fbAppSecret</span><span class="o">:</span> <span class="nx">messengerCredentials</span><span class="p">.</span><span class="nx">fbAppSecret</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="nx">webhookEndpoint</span><span class="o">:</span> <span class="s1">&#39;/webhook_some_random_string&#39;</span><span class="p">,</span>
<span class="p">}</span>

<span class="kr">const</span> <span class="nx">botsSettings</span> <span class="o">=</span> <span class="p">[{</span> <span class="nx">telegram</span><span class="o">:</span> <span class="nx">telegramSettings</span> <span class="p">},</span> <span class="c1">// settings found elsewhere</span>
                      <span class="p">{</span> <span class="nx">messenger</span><span class="o">:</span> <span class="nx">messengerSettings</span> <span class="p">},</span> <span class="c1">// settings found elsewhere</span>
                      <span class="p">{</span> <span class="nx">messenger</span><span class="o">:</span> <span class="nx">otherMessengerSettings</span> <span class="p">},</span>
                      <span class="p">{</span> <span class="nx">twitter</span><span class="o">:</span> <span class="nx">twitterSettings</span><span class="p">},];</span> <span class="c1">// settings found elsewhere</span>

<span class="kr">const</span> <span class="nx">botmaster</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Botmaster</span><span class="p">({</span><span class="nx">settings</span><span class="o">:</span> <span class="nx">botsSettings</span><span class="p">});</span>
</code></pre></div>

<p>Bot objects are created under the hood and events received by each of them will be relayed to the Botmaster in the standardized Messenger format mentioned in the Message format part. Events are called updates and receiving them looks like this:</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="nx">botmaster</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;update&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">bot</span><span class="p">,</span> <span class="nx">update</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
<span class="p">});</span>
</code></pre></div>

<p>Where the bot object would have been created with any of the 4 settings mentioned. Note the fact that there are 2 messenger settings. Because Botmaster requires an endpoint to be specified in the settings, nothing more than specifying it has to be done there. We recommend people to include some sort of a key in their endpoint as added security for Messenger (on top of the integrity verification from the Facebook app secret) and as basic security for Telegram.</p>

<h2 id="working-with-webhooks">Working with webhooks</h2>

<p>In order to receive messages, some platforms make the use of webhooks. Which means they will send requests to some endpoints on your server. In order to do that, both frameworks make the use of express() app objects under the hood. Botkit does so for Messenger, Twilio IPM and some of the Slack solutions. Botmaster does do for Messenger and Telegram (for now).</p>

<p>The standard way to deal with this in Botkit is the following:</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="kr">const</span> <span class="nx">port</span> <span class="o">=</span> <span class="mi">3000</span><span class="p">;</span>

<span class="nx">controller</span><span class="p">.</span><span class="nx">setupWebserver</span><span class="p">(</span><span class="nx">port</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">webserver</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">controller</span><span class="p">.</span><span class="nx">createWebhookEndpoints</span><span class="p">(</span><span class="nx">webserver</span><span class="p">)</span>
<span class="p">});</span>
</code></pre></div>

<p>As you can see, this will create an express() webserver and send it onto the <code>createWebhookEndpoints</code> function. The server will now listen onto the <code>facebook/receive</code> endpoint on port 3000 if it is a Messenger controller. It will listen onto the <code>'/twilio/receive'</code> for Twilio IPM and <code>'/slack/receive'</code> for Slack (if using one of the services that uses webhooks).</p>

<p>Of course, you might want to use your own express() app webserver to use accross multiple controllers or to serve all sorts of other purposes. You would do this like that in Botkit:</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="kr">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
<span class="kr">const</span> <span class="nx">bodyParser</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;body-parser&#39;</span><span class="p">);</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">bodyParser</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">bodyParser</span><span class="p">.</span><span class="nx">urlencoded</span><span class="p">({</span> <span class="nx">extended</span><span class="o">:</span> <span class="kc">true</span> <span class="p">}));</span>
<span class="p">.</span>
<span class="p">.</span>
<span class="p">.</span>
<span class="nx">controller</span><span class="p">.</span><span class="nx">createWebhookEndpoints</span><span class="p">(</span><span class="nx">app</span><span class="p">,</span> <span class="nx">bot</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;This bot is online!!!&#39;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Server up&#39;</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>

<p>In Botmaster, instantiating a botmaster object, will by default just start an express server under the hood for you and make it listen onto port 3000. If you want it to listen onto another port, you can just do something like this when instantiating botmaster:</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="kr">const</span> <span class="nx">port</span> <span class="o">=</span> <span class="mi">3001</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">botmaster</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Botmaster</span><span class="p">({</span> <span class="nx">settings</span><span class="o">:</span> <span class="nx">botsSettings</span><span class="p">,</span>
                                 <span class="nx">port</span><span class="o">:</span> <span class="nx">port</span> <span class="p">});</span>
</code></pre></div>

<p>The webhook endpoints will be set according to your settings. Go to <a href="Readme.md#webhooks">webhooks</a> in the main readme to read some more about webhooks in Botmaster.</p>

<p>In order to use your own express app, you would do as follows in Botmaster.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="kr">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
<span class="kr">const</span> <span class="nx">bodyParser</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;body-parser&#39;</span><span class="p">);</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">bodyParser</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">bodyParser</span><span class="p">.</span><span class="nx">urlencoded</span><span class="p">({</span> <span class="nx">extended</span><span class="o">:</span> <span class="kc">true</span> <span class="p">}));</span>
<span class="p">.</span>
<span class="p">.</span>
<span class="p">.</span>
<span class="kr">const</span> <span class="nx">botmaster</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Botmaster</span><span class="p">({</span><span class="nx">settings</span><span class="o">:</span> <span class="nx">botsSettings</span><span class="p">,</span>
                                 <span class="nx">app</span><span class="o">:</span> <span class="nx">app</span><span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Server up&#39;</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>

<p>By default, Botkit will use different express app webservers for each controller. Botmaster, as mentioned earlier, is a sort of supercontroller. Because of that, it uses the same express webserver accross all channels by default.</p>

<h2 id="supported-platforms">Supported Platforms</h2>

<p>The following are platforms that are supported out of the box. Both frameworks allow developers to write their own integrations and npm packages might exist for the a platform you are interested in.</p>

<table>
<thead>
<tr>
<th></th>
<th>Botmaster</th>
<th>Botkit</th>
</tr>
</thead>

<tbody>
<tr>
<td>Facebook Messenger</td>
<td>x</td>
<td>x</td>
</tr>

<tr>
<td>Slack</td>
<td>x</td>
<td>x</td>
</tr>

<tr>
<td>Twilio IPM</td>
<td></td>
<td>x</td>
</tr>

<tr>
<td>Twitter DM</td>
<td>x</td>
<td></td>
</tr>

<tr>
<td>Telegram</td>
<td>x</td>
<td></td>
</tr>

<tr>
<td>WebSockets</td>
<td>x</td>
<td></td>
</tr>

<tr>
<td>MS Bot framework</td>
<td></td>
<td>x</td>
</tr>
</tbody>
</table>

<h2 id="conversations">Conversations</h2>

<p>Botkit allows developers to specify a deterministic conversation flow within the code to simplify such flows. This is definitely handy and something that can help when creating Slack and Twilio bots</p>

<p>Because Botmaster was initialy built mainly as a standardization agnostic layer that assumes your messages will be sent to some sort of AI service like Watson Conversation and others, this hasn&rsquo;t been builtin to the first version. This is however something that will come soon (in a different form from the ones in Botkit). Depending on requests however, it could come sooner or later.</p>

<h2 id="conclusion">Conclusion</h2>

<p>I hope this all made some sort of sense to you and that you are now able to make a sensible decision with respect to which framework to use.</p>

<p>I realize there are other frameworks out there too that I haven&rsquo;t mentioned. If anyone would like to look into them and tell me what the differences are, I&rsquo;d be happy to add them to another file.</p>
</div>
    </div>
  </main>
  <script>
    function showNavMenu() {
      var sidebar = document.getElementById('sidebar')

      if (sidebar.className.indexOf('dn') !== -1) {
        sidebar.className = 'fl w-100 w-20-l pr2-l di-l'
      } else {
        sidebar.className = 'fl w-100 w-20-l pr2-l di-l dn'
      }
    }
  </script>
</body>

</html>

