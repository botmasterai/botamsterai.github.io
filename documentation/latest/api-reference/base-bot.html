
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>BaseBot Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-versions/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="outgoing-message.html" />
    
    
    <link rel="prev" href="botmaster.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../getting-started/">
            
                <a href="../getting-started/">
            
                    
                    Getting started
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../getting-started/installation.html">
            
                <a href="../getting-started/installation.html">
            
                    
                    Installation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../getting-started/quickstart.html">
            
                <a href="../getting-started/quickstart.html">
            
                    
                    Quickstart
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../getting-started/messenger-setup.html">
            
                <a href="../getting-started/messenger-setup.html">
            
                    
                    Messenger setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../getting-started/slack-setup.html">
            
                <a href="../getting-started/slack-setup.html">
            
                    
                    Slack setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../getting-started/twitter-setup.html">
            
                <a href="../getting-started/twitter-setup.html">
            
                    
                    Twitter setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="../getting-started/telegram-setup.html">
            
                <a href="../getting-started/telegram-setup.html">
            
                    
                    Telegram setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7" data-path="../getting-started/socket.io-setup.html">
            
                <a href="../getting-started/socket.io-setup.html">
            
                    
                    Socket.io setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.8" data-path="../getting-started/webhooks.html">
            
                <a href="../getting-started/webhooks.html">
            
                    
                    Webhooks
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../working-with-botmaster/">
            
                <a href="../working-with-botmaster/">
            
                    
                    Working With Botmaster
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../working-with-botmaster/botmaster-basics.html">
            
                <a href="../working-with-botmaster/botmaster-basics.html">
            
                    
                    Botmaster basics
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../working-with-botmaster/middleware.html">
            
                <a href="../working-with-botmaster/middleware.html">
            
                    
                    Middleware
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../working-with-botmaster/writing-your-own-bot-class.html">
            
                <a href="../working-with-botmaster/writing-your-own-bot-class.html">
            
                    
                    Writing your own bot class
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../middlewares/">
            
                <a href="../middlewares/">
            
                    
                    Middlewares
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../middlewares/fulfill.html">
            
                <a href="../middlewares/fulfill.html">
            
                    
                    fulfill
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../tutorials/">
            
                <a href="../tutorials/">
            
                    
                    Tutorials
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../tutorials/using-fulfill.html">
            
                <a href="../tutorials/using-fulfill.html">
            
                    
                    Using Fulfill
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../tutorials/watson-conversation.html">
            
                <a href="../tutorials/watson-conversation.html">
            
                    
                    Watson Conversation
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../articles/">
            
                <a href="../articles/">
            
                    
                    Articles
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../articles/frameworks-comparison.html">
            
                <a href="../articles/frameworks-comparison.html">
            
                    
                    Framworks comparison
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="./">
            
                <a href="./">
            
                    
                    API reference
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="botmaster.html">
            
                <a href="botmaster.html">
            
                    
                    Botmaster
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.7.2" data-path="base-bot.html">
            
                <a href="base-bot.html">
            
                    
                    BaseBot
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="outgoing-message.html">
            
                <a href="outgoing-message.html">
            
                    
                    OutgoingMessage
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../changelog.html">
            
                <a href="../changelog.html">
            
                    
                    Changelog
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >BaseBot</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <!-- Generated by documentation.js. Update this documentation by updating the source code. -->
<h3 id="table-of-contents">Table of Contents</h3>
<ul>
<li><a href="#basebot">BaseBot</a><ul>
<li><a href="#constructor">constructor</a></li>
<li><a href="#sendmessage">sendMessage</a></li>
<li><a href="#sendmessageto">sendMessageTo</a></li>
<li><a href="#sendmessageto-1">sendMessageTo</a></li>
<li><a href="#sendmessageto-2">sendMessageTo</a></li>
<li><a href="#sendmessageto-3">sendMessageTo</a></li>
<li><a href="#sendtextmessageto">sendTextMessageTo</a></li>
<li><a href="#reply">reply</a></li>
<li><a href="#sendattachmentto">sendAttachmentTo</a></li>
<li><a href="#sendattachmentfromurlto">sendAttachmentFromUrlTo</a></li>
<li><a href="#senddefaultbuttonmessageto">sendDefaultButtonMessageTo</a></li>
<li><a href="#sendistypingmessageto">sendIsTypingMessageTo</a></li>
<li><a href="#sendcascade">sendCascade</a></li>
<li><a href="#sendtextcascadeto">sendTextCascadeTo</a></li>
<li><a href="#sendrawmessage">sendRawMessage</a></li>
<li><a href="#getuserinfo">getUserInfo</a></li>
<li><a href="#createoutgoingmessage">createOutgoingMessage</a></li>
<li><a href="#createoutgoingmessage-1">createOutgoingMessage</a></li>
<li><a href="#createoutgoingmessage-2">createOutgoingMessage</a></li>
<li><a href="#createoutgoingmessagefor">createOutgoingMessageFor</a></li>
</ul>
</li>
<li><a href="#outgoingmessage">OutgoingMessage</a><ul>
<li><a href="#addrecipientbyid">addRecipientById</a></li>
<li><a href="#addrecipientbyphonenumber">addRecipientByPhoneNumber</a></li>
<li><a href="#removerecipient">removeRecipient</a></li>
<li><a href="#addtext">addText</a></li>
<li><a href="#removetext">removeText</a></li>
<li><a href="#addattachment">addAttachment</a></li>
<li><a href="#addattachmentfromurl">addAttachmentFromUrl</a></li>
<li><a href="#removeattachment">removeAttachment</a></li>
<li><a href="#addquickreplies">addQuickReplies</a></li>
<li><a href="#addpayloadlessquickreplies">addPayloadLessQuickReplies</a></li>
<li><a href="#addlocationquickreply">addLocationQuickReply</a></li>
<li><a href="#removequickreplies">removeQuickReplies</a></li>
<li><a href="#addsenderaction">addSenderAction</a></li>
<li><a href="#addtypingonsenderaction">addTypingOnSenderAction</a></li>
<li><a href="#addtypingoffsenderaction">addTypingOffSenderAction</a></li>
<li><a href="#addmarkseensenderaction">addMarkSeenSenderAction</a></li>
<li><a href="#removesenderaction">removeSenderAction</a></li>
</ul>
</li>
</ul>
<h2 id="basebot">BaseBot</h2>
<p><strong>Extends EventEmitter</strong></p>
<p>The class from which all Bot classes mus inherit. It contains all the base
methods that are accessible via all bot classes. Classes that inherit from
BaseBot and want to make implementation specific methods available have to
prepend the method name with an underscore; e.g. in botmaster-messenger:
_getGetStartedButton</p>
<h3 id="constructor">constructor</h3>
<p>Constructor to the BaseBot class from which all the bot classes inherit.
A set a basic functionalities are defined here that have to be implemented
in the subclasses in order for them to work.</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>settings</code> <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank">object</a></strong> inheritors of BaseBot take a settings
object as first param.</li>
</ul>
<p><strong>Examples</strong></p>
<pre><code class="lang-javascript"><span class="hljs-comment">// In general however, one can instantiate a bot object like this:</span>
<span class="hljs-keyword">const</span> bot = <span class="hljs-keyword">new</span> BaseBotSubClass({ <span class="hljs-comment">// e.g. MessengerBot</span>
  credentials: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">my_base_bot_sub_class_credentials</span>&gt;</span>,
  webhookEnpoint: &apos;someEndpoint&apos; // only if class requires them
})
</span></code></pre>
<h3 id="sendmessage">sendMessage</h3>
<p>sendMessage() falls back to the sendMessage implementation of whatever
subclass inherits form BaseBot. The expected format is normally any type of
message object that could be sent on to messenger</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>message</code> <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank">object</a></strong> </li>
<li><code>sendOptions</code> <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean" target="_blank">boolean</a>?</strong> options used for sending the message. e.g. ignoreMiddleware</li>
</ul>
<p><strong>Examples</strong></p>
<pre><code class="lang-javascript"><span class="hljs-comment">// The returned promise for all sendMessage type events resolves with</span>
<span class="hljs-comment">// a body that looks something like this:</span>
 {
  raw: rawBody, <span class="hljs-comment">// can be undefined (e.g. if rawBody is directly returned)</span>
  recipient_id: &lt;id_of_user&gt;,
  message_id: &lt;message_id_of_what_was_just_sent&gt;
  sentMessage: &lt;sent_message_object&gt;
 }

// Some platforms may not have either of these parameters. If that&apos;s the case,
// the value assigned will be null or some other suitable value as the
// equivalent to Messenger&apos;s seq in Telegram.
</code></pre>
<p>Returns <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank">Promise</a></strong> </p>
<h3 id="sendmessageto">sendMessageTo</h3>
<p>Bot class implementation of the __sendMessage function. Each Bot class
has to implement this in order to be able to send outgoing messages.</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>message</code> <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank">object</a></strong> </li>
<li><code>recipientId</code>  </li>
<li><code>sendOptions</code>  </li>
</ul>
<p>Returns <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank">Promise</a></strong> promise that resolves in the body of the response from the platform__sendMessage(rawUpdate) {}</p>
<h3 id="sendmessageto">sendMessageTo</h3>
<p>Bot class implementation of the __formatOutgoingMessage function. Each Bot class
has to implement this in order to be able to send outgoing messages that start
off as valid Messenger message objects (i.e. OutgoingMessage objects).</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>outgoingMessage</code> <strong><a href="#outgoingmessage">OutgoingMessage</a></strong> The outgoingMessage object that
needs to be formatted to the platform standard (formatted out).</li>
<li><code>message</code>  </li>
<li><code>recipientId</code>  </li>
<li><code>sendOptions</code>  </li>
</ul>
<p>Returns <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank">Promise</a></strong> promise that resolves in the body of the response from the platform__formatOutgoingMessage(outgoingMessage) {}</p>
<h3 id="sendmessageto">sendMessageTo</h3>
<p>Bot class implementation of the __createStandardBodyResponseComponents
function. Each Bot class has to implement this in order to be able to
send outgoing messages using sendMessage. This function returns the standard
recipient_id and message_id we can expect from using sendMessage</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>sentOutgoingMessage</code> <strong><a href="#outgoingmessage">OutgoingMessage</a></strong> The OutgoingMessage object
before formatting</li>
<li><code>sentRawMessage</code> <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank">object</a></strong> The raw message that was actually sent to
the platform after __formatOutgoingMessage was called</li>
<li><code>rawPlatformBody</code> <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank">object</a></strong> the raw body response from the platform</li>
<li><code>message</code>  </li>
<li><code>recipientId</code>  </li>
<li><code>sendOptions</code>  </li>
</ul>
<p>Returns <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank">Promise</a></strong> promise that resolves in an object that contains
both the recipient<em>id and message_id fields\</em>_createStandardBodyResponseComponents(
  sentOutgoingMessage, sentRawMessage, rawPlatformBody) {}</p>
<h3 id="sendmessageto">sendMessageTo</h3>
<p>sendMessageTo() Just makes it easier to send a message without as much
structure.</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>message</code> <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank">object</a></strong> NOT an instance of OutgoingMessage. Use
#sendMessage if you want to send instances of OutgoingMessage</li>
<li><code>recipientId</code> <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String" target="_blank">string</a></strong> </li>
<li><code>sendOptions</code> <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank">object</a>?</strong> just options for sending.</li>
</ul>
<p><strong>Examples</strong></p>
<pre><code class="lang-javascript"><span class="hljs-comment">// message object can look something like this:</span>

message: {
 text: <span class="hljs-string">&apos;Some random text&apos;</span>
}
</code></pre>
<p>Returns <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank">Promise</a></strong> promise</p>
<h3 id="sendtextmessageto">sendTextMessageTo</h3>
<p>sendTextMessageTo() Just makes it easier to send a text message with
minimal structure.</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>text</code> <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String" target="_blank">string</a></strong> </li>
<li><code>recipientId</code> <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String" target="_blank">string</a></strong> </li>
<li><code>sendOptions</code> <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank">object</a>?</strong> just options for sending.</li>
</ul>
<p>Returns <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank">Promise</a></strong> promise</p>
<h3 id="reply">reply</h3>
<p>reply() Another way to easily send a text message. In this case,
we just send the update that came in as is and then the text we
want to send as a reply.</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>incomingUpdate</code> <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank">object</a></strong> </li>
<li><code>text</code> <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String" target="_blank">string</a></strong> </li>
<li><code>sendOptions</code> <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank">object</a>?</strong> just options for sending.</li>
</ul>
<p>Returns <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank">Promise</a></strong> promise</p>
<h3 id="sendattachmentto">sendAttachmentTo</h3>
<p>sendAttachmentTo() makes it easier to send an attachment message with
less structure.</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>attachment</code> <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank">object</a></strong> </li>
<li><code>recipientId</code> <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String" target="_blank">string</a></strong> </li>
<li><code>sendOptions</code> <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank">object</a>?</strong> just options for sending.</li>
</ul>
<p><strong>Examples</strong></p>
<pre><code class="lang-javascript"><span class="hljs-comment">// attachment object typically looks something like this:</span>

<span class="hljs-keyword">const</span> attachment = {
  type: <span class="hljs-string">&apos;image&apos;</span>,
  payload: {
    url: <span class="hljs-string">&quot;some_valid_url_of_some_image&quot;</span>
  },
};
</code></pre>
<p>Returns <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank">Promise</a></strong> promise</p>
<h3 id="sendattachmentfromurlto">sendAttachmentFromUrlTo</h3>
<p>sendAttachmentFromUrlTo() makes it easier to send an attachment message with
minimal structure.</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>type</code> <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String" target="_blank">string</a></strong> </li>
<li><code>url</code> <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String" target="_blank">string</a></strong> </li>
<li><code>recipientId</code> <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String" target="_blank">string</a></strong> </li>
<li><code>sendOptions</code> <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank">object</a>?</strong> just options for sending.</li>
</ul>
<p>Returns <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank">Promise</a></strong> promise</p>
<h3 id="senddefaultbuttonmessageto">sendDefaultButtonMessageTo</h3>
<p>sendDefaultButtonMessageTo() makes it easier to send a default set of
buttons. The default button type is the Messenger quick_replies, where
the payload is the same as the button title and the content_type is text.</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>buttonTitles</code> <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank">Array</a></strong> </li>
<li><code>textOrAttachment</code> <strong>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String" target="_blank">string</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank">object</a>)</strong> , if falsy, will be set to a
default text of &quot;Please select one of:&quot;</li>
<li><code>recipientId</code> <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String" target="_blank">string</a></strong> </li>
<li><code>sendOptions</code> <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank">object</a>?</strong> </li>
</ul>
<p>Returns <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank">Promise</a></strong> promise</p>
<h3 id="sendistypingmessageto">sendIsTypingMessageTo</h3>
<p>sendIsTypingMessageTo() just sets the is typing status to the platform
if available.
based on the passed in update</p>
<p>i.e. it has no message_id (or it is null/undefined)</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>recipientId</code> <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String" target="_blank">string</a></strong> </li>
<li><code>sendOptions</code> <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank">object</a>?</strong> </li>
</ul>
<p><strong>Examples</strong></p>
<pre><code class="lang-javascript"><span class="hljs-comment">// the returned value is different from the standard one. It looks something</span>
<span class="hljs-comment">//like this in this case:</span>

{
  recipient_id: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">id_of_user</span>&gt;</span>
}
</span></code></pre>
<p>Returns <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank">Promise</a></strong> promise</p>
<h3 id="sendcascade">sendCascade</h3>
<p>sendCascadeTo() allows developers to send a cascade of messages
in a sequence. All types of messages can be sent (including raw messages).</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>messageArray</code> <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank">Array</a></strong> of messages in a format as such:
[{raw: someRawObject}, {message: some valid outgoingMessage}]</li>
<li><code>sendOptions</code>  </li>
</ul>
<p>Returns <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank">Promise</a></strong> promise
The returned value an in-place array of bodies received from the client platform
The objects of the array are of the same format as for standard messages</p>
<h3 id="sendtextcascadeto">sendTextCascadeTo</h3>
<p>sendTextCascadeTo() is simply a helper function around sendCascadeTo.
It allows developers to send a cascade of text messages more easily.</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>textArray</code> <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank">Array</a></strong> of messages in a format as such: [&apos;message1&apos;, &apos;message2&apos;]</li>
<li><code>recipientId</code> <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String" target="_blank">string</a></strong> just the id of the recipient to send the messages to.</li>
<li><code>sendOptions</code>  </li>
</ul>
<p>Returns <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank">Promise</a></strong> promise
The returned value an in-place array of bodies received from the client platform
The objects of the array are of the same format as for standard messages</p>
<h3 id="sendrawmessage">sendRawMessage</h3>
<p>sendRawMessage() simply sends a raw platform dependent message. This method
calls <strong>sendMessage in each botClass without calling formatOutgoingMessage
before. It&apos;s really just sugar around </strong>sendMessage which shouldn&apos;t be used
directly.</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>rawMessage</code> <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank">Object</a></strong> </li>
</ul>
<p>Returns <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank">Promise</a></strong> promise</p>
<h3 id="getuserinfo">getUserInfo</h3>
<p>Retrieves the basic user info from a user if platform supports it</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>userId</code> <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String" target="_blank">string</a></strong> </li>
</ul>
<p>Returns <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank">Promise</a></strong> promise that resolves into the user info or an empty
object by default</p>
<h3 id="createoutgoingmessage">createOutgoingMessage</h3>
<p>sets up the app if needed.
As in sets up the endpoints that the bot can get called onto
see code in bot classes packages to see examples of this in action
Should not return anything</p>
<p>__createMountPoints() {}</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>message</code>  </li>
</ul>
<h3 id="createoutgoingmessage">createOutgoingMessage</h3>
<p>Format the update gotten from the bot source (telegram, messenger etc..).
Returns an update in a standard format</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>rawUpdate</code> <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank">object</a></strong> </li>
<li><code>message</code>  </li>
</ul>
<p>Returns <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank">object</a></strong> update__formatUpdate(rawUpdate) {}</p>
<h3 id="createoutgoingmessage">createOutgoingMessage</h3>
<p>#createOutgoingMessage exposes the OutgoingMessage constructor
via BaseBot. This simply means one can create their own
OutgoingMessage object using any bot object. They can then compose
it with all its helper functions</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>message</code> <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank">object</a></strong> base object that the outgoing Message should be based on</li>
</ul>
<p>Returns <strong><a href="#outgoingmessage">OutgoingMessage</a></strong> outgoingMessage. The same object passed in with
all the helper functions from OutgoingMessage</p>
<h3 id="createoutgoingmessagefor">createOutgoingMessageFor</h3>
<p>same as #createOutgoingMessage, creates empty outgoingMessage with
id of the recipient set. Again, this is jut sugar syntax for creating a
new outgoingMessage object</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>recipientId</code> <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String" target="_blank">string</a></strong> id of the recipient the message is for</li>
</ul>
<p>Returns <strong><a href="#outgoingmessage">OutgoingMessage</a></strong> outgoingMessage. A valid OutgoingMessage object with recipient set.</p>
<h2 id="outgoingmessage">OutgoingMessage</h2>
<p>This class will help you compose sendable message objects.</p>
<h3 id="addrecipientbyid">addRecipientById</h3>
<p>Adds recipient.id param to the OutgoingMessage object. This is most
likely what you will want to do to add a recipient. Alternatively, you Can
use addRecipientByPhoneNumber if the platform you are sending the message to
supports that.</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>id</code> <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String" target="_blank">string</a></strong> the id to add to the OutgoingMessage object</li>
</ul>
<p>Returns <strong>OutgoinMessage</strong> returns this object to allow for chaining of methods.</p>
<h3 id="addrecipientbyphonenumber">addRecipientByPhoneNumber</h3>
<p>Adds recipient.phone_number param to the OutgoingMessage object.
You might prefer to add a recipient by id rather. This is achieved via
addRecipientById</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>phoneNumber</code> <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String" target="_blank">string</a></strong> the phone number to add to the OutgoingMessage object</li>
</ul>
<p>Returns <strong>OutgoinMessage</strong> returns this object to allow for chaining of methods.</p>
<h3 id="removerecipient">removeRecipient</h3>
<p>removes the recipient param from the OutgoingMessage object.
This will remove the object wether it was set with a phone number or an id</p>
<p>Returns <strong>OutgoinMessage</strong> returns this object to allow for chaining of methods.</p>
<h3 id="addtext">addText</h3>
<p>Adds message.text to the OutgoingMessage</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>text</code> <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String" target="_blank">string</a></strong> the text to add to the OutgoingMessage object</li>
</ul>
<p>Returns <strong>OutgoinMessage</strong> returns this object to allow for chaining of methods.</p>
<h3 id="removetext">removeText</h3>
<p>Removes the message.text param from the OutgoingMessage object.</p>
<p>Returns <strong>OutgoinMessage</strong> returns this object to allow for chaining of methods.</p>
<h3 id="addattachment">addAttachment</h3>
<p>Adds message.attachment to the OutgoingMessage. If you want to add
an attachment simply from a type and a url, have a look at:
addAttachmentFromUrl</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>attachment</code> <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank">object</a></strong> valid messenger type attachment that can be
formatted by the platforms your bot uses</li>
</ul>
<p>Returns <strong>OutgoinMessage</strong> returns this object to allow for chaining of methods.</p>
<h3 id="addattachmentfromurl">addAttachmentFromUrl</h3>
<p>Adds message.attachment from a type and url without requiring you to
provide the whole attachment object. If you want to add an attachment using
a full object, use addAttachment.</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>type</code> <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String" target="_blank">string</a></strong> the attachment type (audio, video, image, file)</li>
<li><code>url</code> <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String" target="_blank">string</a></strong> the url of the attachment.</li>
</ul>
<p>Returns <strong>OutgoinMessage</strong> returns this object to allow for chaining of methods.</p>
<h3 id="removeattachment">removeAttachment</h3>
<p>Removes message.attachment param from the OutgoingMessage object.</p>
<p>Returns <strong>OutgoinMessage</strong> returns this object to allow for chaining of methods.</p>
<h3 id="addquickreplies">addQuickReplies</h3>
<p>Adds message.quick_replies to the OutgoinMessage object. Use
addPayloadLessQuickReplies if you just want to add quick replies from an
array of titles</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>quickReplies</code> <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank">Array</a></strong> The quick replies objects to add to the
OutgoingMessage</li>
</ul>
<p>Returns <strong>OutgoinMessage</strong> returns this object to allow for chaining of methods.</p>
<h3 id="addpayloadlessquickreplies">addPayloadLessQuickReplies</h3>
<p>Adds message.quick_replies to the OutgoinMessage object from a simple array
of quick replies titles.Use addQuickReplies if want to add quick replies
from an quick reply objects</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>quickRepliesTitles</code> <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank">Array</a></strong> The titles of the quick replies objects to add to the
OutgoingMessage</li>
</ul>
<p>Returns <strong>OutgoinMessage</strong> returns this object to allow for chaining of methods.</p>
<h3 id="addlocationquickreply">addLocationQuickReply</h3>
<p>Adds a content_type: location message.quick_replies to the OutgoingMessage.
Use this if the platform the bot class you are using is based on supports
asking for the location to its users.</p>
<p>Returns <strong>OutgoinMessage</strong> returns this object to allow for chaining of methods.</p>
<h3 id="removequickreplies">removeQuickReplies</h3>
<p>Removes message.quick_replies param from the OutgoingMessage object.</p>
<p>Returns <strong>OutgoinMessage</strong> returns this object to allow for chaining of methods.</p>
<h3 id="addsenderaction">addSenderAction</h3>
<p>Adds an arbitrary sender_action to the OutgoinMessage</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>senderAction</code> <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String" target="_blank">string</a></strong> Arbitrary sender action
(typing_on, typing_off or mark_seens)</li>
</ul>
<p>Returns <strong>OutgoinMessage</strong> returns this object to allow for chaining of methods.</p>
<h3 id="addtypingonsenderaction">addTypingOnSenderAction</h3>
<p>Adds &quot;typing_on&quot; sender_action to the OutgoinMessage</p>
<p>Returns <strong>OutgoinMessage</strong> returns this object to allow for chaining of methods.</p>
<h3 id="addtypingoffsenderaction">addTypingOffSenderAction</h3>
<p>Adds &quot;typing_off&quot; sender_action to the OutgoinMessage</p>
<p>Returns <strong>OutgoinMessage</strong> returns this object to allow for chaining of methods.</p>
<h3 id="addmarkseensenderaction">addMarkSeenSenderAction</h3>
<p>Adds &quot;mark_seen&quot; sender_action to the OutgoinMessage</p>
<p>Returns <strong>OutgoinMessage</strong> returns this object to allow for chaining of methods.</p>
<h3 id="removesenderaction">removeSenderAction</h3>
<p>Removes sender_action param from the OutgoingMessage object.</p>
<p>Returns <strong>OutgoinMessage</strong> returns this object to allow for chaining of methods.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="botmaster.html" class="navigation navigation-prev " aria-label="Previous page: Botmaster">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="outgoing-message.html" class="navigation navigation-next " aria-label="Next page: OutgoingMessage">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"BaseBot","level":"1.7.2","depth":2,"next":{"title":"OutgoingMessage","level":"1.7.3","depth":2,"path":"api-reference/outgoing-message.md","ref":"api-reference/outgoing-message.md","articles":[]},"previous":{"title":"Botmaster","level":"1.7.1","depth":2,"path":"api-reference/botmaster.md","ref":"api-reference/botmaster.md","articles":[]},"dir":"ltr"},"config":{"plugins":["versions","collapsible-menu"],"root":"./docs","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"versions":{"type":"branches","gitbookConfigURL":"https://raw.githubusercontent.com/botmasterai/botmasterai.github.io/master/book.json","options":[{"value":"http://botmasterai.com/documentation/latest/","text":"latest"},{"value":"http://botmasterai.com/documentation/latest/","text":"Version 3.0.8","selected":true},{"value":"http://botmasterai.com/documentation/v2.3.1/","text":"Version 2.3.1"}]},"collapsible-menu":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"gitbook":"*"},"file":{"path":"api-reference/base-bot.md","mtime":"2017-04-03T11:14:06.000Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-04-03T13:36:06.979Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-versions/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-collapsible-menu/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

